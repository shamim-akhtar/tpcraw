<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Sentiment Dashboard</title>
  <link rel="stylesheet" href="style.css">

  <!-- Load Chart.js from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <!-- Link to our ES module script -->
  <script type="module" src="script.js"></script>
</head>
<body>
  <header>
    <h1>Sentiment Dashboard</h1>
  </header>

  <section class="controls">
    <div class="date-range">
      <label for="start-date">Start Date:</label>
      <input type="date" id="start-date" value="2025-01-01">
      
      <label for="end-date">End Date:</label>
      <input type="date" id="end-date">
      
      <!-- New checkbox for toggling IIT vs Poly -->
      <label for="iit-filter">IIT</label>
      <input type="checkbox" id="iit-filter" checked>
  
      <button id="filter-btn">Filter</button>
    </div>
  </section>

  <section class="post-count-section" style="display: flex; gap: 20px;">

    <div id="postCount" class="dashboard-box">
      <div class="postCount-title">Posts</div>
      <div class="postCount-number">0</div>
    </div>
  
    <div id="commentsCount" class="dashboard-box">
      <div class="postCount-title">Comments</div>
      <div id="commentsCountNumber" class="postCount-number">0.00</div>
    </div>  
  </section>

  <section class="post-count-section" style="display: flex; gap: 20px;">
  
    <div id="avgWeightedScoreBox" class="dashboard-box-wide">
      <div class="postCount-title">Avg Weighted Sentiment</div>
      <div id="avgWeightedScoreNumber" class="postCount-number-wide">0.00</div>
    </div>
  
  </section>

  <section class="post-count-section" style="display: flex; gap: 20px;">
  
    <div id="sentimentPieBox" class="dashboard-box-large" style="--content-top: 45px; --content-left: 20px">
      <div class="postCount-title-large">Sentiments Distribution</div>
      <canvas id="sentimentPieChart" style="width:260px; height:260px;"></canvas>
    </div>
  
  </section>

  <!-- <section class="chart-section">
    <h3>Weighted Sentiment Score for Posts</h3>
     
    <p style="font-size: small; text-align: left; max-width: 1200px; margin: 5px auto;">
      This chart displays the Weighted Sentiment Scores of posts within the selected date 
      range and filters. The weighted sentiment score is computed by multiplying each post's 
      raw sentiment score—derived from analyzing the sentiment polarity of post content—with 
      its engagement score, giving greater emphasis to posts with higher interaction. 
      A positive score indicates generally favorable sentiment, while a negative score 
      highlights critical or negative sentiment, quickly identifying topics resonating 
      positively or negatively within the community.
    </p>
    <canvas
      id="weightedSentimentChart"
    ></canvas>
  </section>

  <section class="chart-section">
    <h3>Stacked Sentiment Chart</h3>
     
    <p style="font-size: small; text-align: left; max-width: 1200px; margin: 5px auto;">
      This stacked sentiment chart displays the overall sentiment breakdown for each post within the selected date range. 
      The green segment represents the total number of positive sentiments derived from the comments,
      while the red segment shows the total number of negative sentiments. Posts with predominantly green
       segments indicate a more favorable reception, whereas those with larger red segments 
       suggest stronger negative feedback. This visualization helps you quickly assess the 
       sentiment balance across the posts' comments.
    </p>
    <canvas
      id="stackedSentimentChart"
    ></canvas>
  </section> -->

  <!-- Tab buttons -->
  <div class="tab-container">
    <button class="tab-button active" data-tab="weightedTab">Weighted Sentiment Score</button>
    <button class="tab-button" data-tab="stackedTab">Stacked Sentiment Chart</button>
  </div>

  <!-- Weighted Sentiment Score Tab Content -->
  <section id="weightedTab" class="chart-section tab-content active">
    <h3>Weighted Sentiment Score for Posts</h3>
    <p style="font-size: small; text-align: left; max-width: 1200px; margin: 5px auto;">
      This chart displays the Weighted Sentiment Scores of posts within the selected date 
      range and filters. The weighted sentiment score is computed by multiplying each post's 
      raw sentiment score—derived from analyzing the sentiment polarity of post content—with 
      its engagement score, giving greater emphasis to posts with higher interaction. 
      A positive score indicates generally favorable sentiment, while a negative score 
      highlights critical or negative sentiment, quickly identifying topics resonating 
      positively or negatively within the community.
    </p>
    <canvas id="weightedSentimentChart"></canvas>
  </section>

  <!-- Stacked Sentiment Chart Tab Content -->
  <section id="stackedTab" class="chart-section tab-content" style="display:none;">
    <h3>Stacked Sentiment Chart</h3>
    <p style="font-size: small; text-align: left; max-width: 1200px; margin: 5px auto;">
      This stacked sentiment chart displays the overall sentiment breakdown for each post within the selected date range. 
      The green segment represents the total number of positive sentiments derived from the comments,
      while the red segment shows the total number of negative sentiments. Posts with predominantly green
      segments indicate a more favorable reception, whereas those with larger red segments 
      suggest stronger negative feedback. This visualization helps you quickly assess the 
      sentiment balance across the posts' comments.
    </p>
    <canvas id="stackedSentimentChart"></canvas>
  </section>

  
  <section class="chart-section">
    <!-- Set the canvas width to 1200 and optionally a matching inline style -->
    <h3>Engagement Score for Posts</h3>
     
    <p style="font-size: small; text-align: left; max-width: 1200px; margin: 5px auto;">
      This chart displays the Engagement Scores for posts, reflecting interactions such as comments, and upvotes. 
      The engagement score is calculated by aggregating these interactions, with each type of interaction assigned a
       specific weight based on its significance in indicating active interest. 
      Higher engagement typically signifies topics of greater interest or controversy, 
      offering insights into the community’s most active discussions.
    </p>
    <canvas
      id="engagementScoreChart"
    ></canvas>
  </section>

  <section class="chart-section">
    <!-- Set the canvas width to 1200 and optionally a matching inline style -->
    <h3>Total Comments per Post</h3>
     
    <p style="font-size: small; text-align: left; max-width: 1200px; margin: 5px auto;">
      This engagement chart displays the total number of comments for each post, represented by 
      purple bars. A taller bar indicates a higher level of user interaction, signaling 
      which posts sparked more discussion. Clicking on a bar reveals additional details, 
      such as the post title and creation date, helping you quickly identify the most 
      engaging content.
    </p>
    <canvas
      id="totalCommentsChart"
    ></canvas>
  </section>




  <!-- Card Section with dropdown & table -->
  <section class="card-section">
    <div class="card">
      <h2>Post List</h2>
      <label for="postListDropdown">Select View:</label>
      <select id="postListDropdown">
        <option value="topEngaged">Top 10 Engaged Posts</option>
        <option value="lowestWs">Lowest 10 Weighted Sentiment Posts</option>
        <option value="lowestRaw">Lowest 10 Raw Sentiment Posts</option>
        <option value="highestWs">Highest 10 Weighted Sentiment Posts</option>
        <option value="highestRaw">Highest 10 Raw Sentiment Posts</option>
        <option value="recentPosts">Top 10 Most Recent Posts</option>
      </select>

      <!-- Table container -->
      <div id="postListContainer"></div>
    </div>
  </section>
</body>
</html>
